<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com"> 
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">

<script type="text/javascript" type="text/javascript">

  //   // Connecting to ROS
  //   // -----------------
  window.ros = new ROSLIB.Ros({
      url : 'ws://172.20.10.10:9090'
    });

    window.ros.on('connection', function() {
      console.log('Connected to websocket server.');
    });

    window.ros.on('error', function(error) {
      console.log('Error connecting to websocket server: ', error);
    });

    window.ros.on('close', function() {
      console.log('Connection to websocket server closed.');
    });

  // Publishing a Topic
  // ------------------

  window.estopPub = new ROSLIB.Topic({
    ros : ros,
    name : '/switch',
    messageType : 'std_msgs/Bool'
  });

  window.trueBoolMsg = new ROSLIB.Message({
    data: true
  });

  window.falseBoolMsg = new ROSLIB.Message({
    data: false
  });
  

  // Subscribing to a Topic
  // ----------------------

//   rospy.Subscriber("/rangefinder/front", Float32 , RfFrontCallback)
// rospy.Subscriber("/rangefinder/back", Float32, RfBackCallback)
// rospy.Subscriber("/encoder", Float32, EncCallback)
// rospy.Subscriber("/battery", BatteryState, BatCallback)

// robotSpeedPub = rospy.Publisher('/motor_speed', Float32, queue_size=10)
// flashLightPub = rospy.Publisher('/deterrents/led', Bool, queue_size=10)
// soundPub = rospy.Publisher('/play_sound', Int32, queue_size=10)

  window.battery_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/battery',
    messageType : 'sensor_msgs/BatteryState'
  });

  window.encoder_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/encoder',
    messageType : 'std_msgs/Float32'
  });

  window.rangefinder_front_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/rangefinder/front',
    messageType : 'std_msgs/Float32'
  });

  window.rangefinder_back_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/rangefinder/back',
    messageType : 'std_msgs/Float32'
  });

  window.motor_speed_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/motor_speed',
    messageType : 'std_msgs/Float32'
  });

  window.deterrents_led_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/deterrents/led',
    messageType : 'std_msgs/Bool'
  });

  window.play_sound_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/play_sound',
    messageType : 'std_msgs/Int32'
  });

  window.manual_override_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/manual_override',
    messageType : 'std_msgs/Bool'
  });

  window.robot_state_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/robot_state',
    messageType : 'std_msgs/String'
  });

  window.switch_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/switch',
    messageType : 'std_msgs/Bool'
  });

  // Calling a service
  // -----------------

  // var addTwoIntsClient = new ROSLIB.Service({
  //   ros : ros,
  //   name : '/add_two_ints',
  //   serviceType : 'rospy_tutorials/AddTwoInts'
  // });

  // var request = new ROSLIB.ServiceRequest({
  //   a : 1,
  //   b : 2
  // });

  // addTwoIntsClient.callService(request, function(result) {
  //   console.log('Result for service call on '
  //     + addTwoIntsClient.name
  //     + ': '
  //     + result.sum);
  // });

  // // Getting and setting a param value
  // // ---------------------------------

  // ros.getParams(function(params) {
  //   console.log(params);
  // });

  // var maxVelX = new ROSLIB.Param({
  //   ros : ros,
  //   name : 'max_vel_y'
  // });

  // maxVelX.set(0.8);
  // maxVelX.get(function(value) {
  //   console.log('MAX VAL: ' + value);
  // });

</script>
<meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>BoaW Controller</title>
</head>
<body>
  <div id="root"></div>
</body>
</html>